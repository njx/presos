<!doctype html>  
<html lang="en">
    
    <head>
        <meta charset="utf-8">
        
        <title>How to Hack on Brackets</title>
        
        <meta name="description" content="Suggestions for how to contribute to the Brackets project: github.com/adobe/brackets">
        <meta name="author" content="Narciso (nj) Jaramillo, @notwebsafe">
        
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        
        <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <script src="http://use.edgefonts.net/source-code-pro:n9,n7,n2,n3,n4,n6:all.js"></script>
        
        <link rel="stylesheet" href="../reveal.js/css/main.css">
        <link rel="stylesheet" href="../reveal.js/css/theme/sky.css" id="theme">
        <link rel="stylesheet" href="styles.css">
        
        <link rel="stylesheet" href="../reveal.js/lib/css/zenburn.css">
    </head>
    
    <body>
        <div class="slide-bg"></div>
        <div class="slide-dim-bg"></div>
        <div class="reveal">
            <div class="slides">
                <section>
                    <h1>How to Hack on Brackets</h1>
                    <div class="brackets-logo"></div>
                    <p>
                        Narciso (NJ) Jaramillo<br/>
                        <a href="http://twitter.com/notwebsafe">@notwebsafe</a>
                    </p>                    
                    <script>
                        // Deliciously hacky. Look away.
                        if( navigator.userAgent.match( /(iPhone|iPad|iPod|Android)/i ) ) document.write( '<p style="color: rgba(0,0,0,0.3); text-shadow: none;">('+'Tap to navigate'+')</p>' );
                    </script>
                </section>
                
                <section>
                    <section data-state="what">
                        <h1>What To Hack On</h1>
                    </section>
                
                    <section data-state="what-bg">
                        <h2>What Should I Work On?</h2>
                        <ul>
                            <li>Find a <a href="https://github.com/adobe/brackets/issues?labels=starter+bug&state=open">starter bug</a></li>
                            <li>Find a <a href="http://bit.ly/BracketsBacklog">starter feature</a></li>
                            <li>Work on a <a href="https://github.com/adobe/brackets/blob/master/src/nls/README.md">translation</a></li>
                            <li>Add code hints, Quick Open, or Quick Edit for a language</li>
                            <li>Update/write <a href="https://github.com/adobe/brackets/wiki">developer or user documentation</a></li>
                            <li>Check in with the <a href="https://groups.google.com/group/brackets-dev">Google Group</a> or #brackets</li>
                        </ul>
                        <p class="fragment punchline">Or whatever you want!</p>
                    </section>
                    
                    <section data-state="what-bg">
                        <h2>Signing Up for a Bug</h2>
                        <ul>
                            <li>Check the labels<br/>
                                <img src="images/bug-list.png" width="658" height="269"></li>
                            <li>Comment on the bug to claim it</li>
                            <li>Submit a pull request</li>
                            <li>After it's merged, add a comment asking filer to close</li>
                        </ul>
                    </section>
                    
                    <section data-state="what-bg">
                        <h2>Signing Up for a Feature</h2>
                        <ul>
                            <li>Mention what you're working on on the Google Group</li>
                            <li>Describe your design/approach and get feedback</li>
                            <li>Or post a prototype (as a branch or an extension)</li>
                        </ul>
                    </section>
                </section>
                
                <section>
                    <section data-state="how-core">
                        <h1>Hacking on Core</h1>
                    </section>
                    
                    <section data-state="how-core-bg">
                        <h2>Get Set Up</h2>
                        <ul>
                            <li>Install <a href="https://github.com/adobe/brackets/downloads">a build of Brackets</a> to get the shell</li>
                            <li>Fork the <a href="https://github.com/adobe/brackets">Brackets repo</a></li>
                            <li>Run the setup script in your fork of the repo<br/>
                                <div class="platform">Mac</div> <code class="small">tools/setup_for_hacking.sh "/Applications/Brackets Sprint 14.app"</code><br/>
                                <div class="platform">Win</div> <code class="small">tools\setup_for_hacking.bat "C:\Program Files (x86)\Brackets Sprint 14"</code>
                            </li>
                        </ul>
                        <img class="plain" src="images/brackets-symlink.png" width="800" height="234">
                    </section>
                    
                    <section data-state="how-core-bg">
                        <h2>Development Workflow</h2>
                        <ul>
                            <li>Launch Brackets</li>
                            <li><strong>Debug &gt; New Brackets Window</strong></li>
                            <li>Edit / save in first window, reload / test in second window</li>
                        </ul>
                        <img class="plain" src="images/dev-workflow.png" width="800" height="300">
                    </section>
                    
                    <section data-state="how-core-bg">
                        <h2>Trouble?</h2>
                        <ul>
                            <li><strong>Debug &gt; Show Developer Tools</strong> brings up Web Inspector</li>
                            <li>Delete your prefs/cache<br/>
                                <div class="platform">Mac</div> <code class="small">~/Library/Application Support/Brackets</code><br/>
                                <div class="platform">Win</div> <code class="small"><span class="param">{USER}</span>\AppData\Roaming\Brackets</code>
                            </li>
                            <li>Revert to installed Brackets source<br/>
                                <div class="platform">Mac</div> <code class="small">tools/restore_installed_build.sh "/Applications/Brackets Sprint 14.app"</code><br/>
                                <div class="platform">Win</div> <code class="small">tools\restore_installed_build.bat "C:\Program Files (x86)\Brackets Sprint 14"</code>
                            </li>
                        </ul>
                    </section>
    
                    <section data-state="how-core-bg">
                        <h2>Practice Good Hygiene</h2>
                        <ul>
                            <li>Read the <a href="https://github.com/adobe/brackets/wiki/Brackets-Coding-Conventions">Brackets Coding Conventions</a></li>
                            <li>Make sure your code is JSLint-clean</li>
                            <li>Write Jasmine unit tests</li>
                            <li>Run all unit tests with <strong>Debug &gt; Run Tests</strong>
                            <li>Run the <a href="https://github.com/adobe/brackets/wiki/Brackets-Smoke-Tests">smoke tests</a></li>
                        </ul>
                    </section>

                    <section data-state="how-core-bg">
                        <h2>Unit Testing, Jasmine-style</h2>
                        <pre><code>describe(<span class="dim">"PreferenceStorage", function () {</span>

    it(<span class="dim">"should read initial preferences from JSON", function () {

        var store = new PreferenceStorage(CLIENT_ID, 
            {"foo": "bar", hello: "world"});</span>
        expect(<span class="dim">store.getValue("foo")</span>).toBe(<span class="dim">"bar"</span>);
        expect(<span class="dim">store.getValue("hello")</span>).toBe(<span class="dim">"world"</span>);

    });

});</pre></code>
                        <input type="button" class="dimmer" value="Highlight"/>
                    </section>

                    <section data-state="how-core-bg">
                        <h2>Testing Asynchronous Sequences</h2>
                        <pre><code><span class="dim">it("should remove a list item when a file is closed", function () {
    DocumentManager.getCurrentDocument()._markClean();
           
    // close the document
    var didClose = false, gotError = false;</span>
    runs(function () {
<span class="dim">        CommandManager.execute(Commands.FILE_CLOSE)
            .done(function () { didClose = true; })
            .fail(function () { gotError = true; });</span>
    });
    waitsFor(function () { return didClose &amp;&amp; !gotError; }, 
        "FILE_OPEN on file timeout", 1000);
<span class="dim">            
    // check there are no list items</span>
    runs(function () {
<span class="dim">        var listItems = 
            testWindow.$("#open-files-container &gt; ul").children();
        expect(listItems.length).toBe(1);</span>
    });
<span class="dim">});</span></pre></code>
                        <input type="button" class="dimmer" value="Highlight"/>
                    </section>
                    
                    <section data-state="how-core-bg">
                        <h2>Unit testing in Brackets</h2>
                        <ul>
                            <li>Core tests are in <code>brackets/test/spec</code></li>
                            <li>Add new test files to <code>brackets/test/UnitTestSuite.js</code></li>
                            <li>Test contexts:
                                <ul>
                                    <li>True unit tests: run in test runner window<br/>
                                        Use <code>require()</code> for modules (private to test window)</li>
                                    <li>Integration tests: (slower)<br/>
                                        <code>SpecRunnerUtils.createTestWindowAndRun()</code><br/>
                                        <code>testWindow.brackets.test.<em>ModuleName</em></code></li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    
                    <section data-state="how-core-bg">
                        <h2>Code Complete! What Now?</h2>
                        <ul>
                            <li>Fill out the <a href="http://dev.brackets.io/brackets-contributor-license-agreement.html">Contributor License Agreement</a> (once)</li>
                            <li>Submit a pull request from your fork</li>
                            <li>Small changes are reviewed within a couple of days</li>
                            <li>Larger requests will be reviewed in a future sprint</li>
                            <li>Core team sprints are 2.5 weeks long</li>
                        </ul>
                    </section>
                </section>
                
                <section>
                    <section data-state="how-extensions">
                        <h1>Writing Extensions</h1>
                    </section>
                    
                    <section data-state="how-extensions-bg">
                        <h2>What You Can Build With Extensions</h2>
                        <div class="extension-images">
                            <div class="extension-image">
                                <a href="https://github.com/GarthDB/brackets-inline-color-editor"><img src="images/inline-color.png" width="280" height="360"></a>
                            </div>
                            <div class="extension-image">
                                <a href="https://github.com/mikechambers/StringConvert"><img src="images/utilities.png" width="280" height="360"></a>
                            </div>
                            <div class="extension-image">
                                <a href="https://github.com/adobe/brackets/tree/master/src/extensions/default/QuickOpenCSS"><img src="images/quick-open-css.png" width="280" height="360"></a>
                            </div>
                        </div>
                        <p>Try to build new features as extensions first</p>
                        <p>Minimize core code changes (and discuss with community)</p>
                    </section>
                    
                    <section data-state="how-extensions-bg">
                        <h2>How to Build an Extension</h2>
                        <ul>
                            <li>Create a folder or repo in <code>extensions/user</code></li>
                            <li>Create a <code>main.js</code> file containing your main module</li>
                            <li>Use <code>brackets.getModule()</code> for core modules</li>
                            <li>Use <code>require()</code> for your own modules</li>
                            <li>Use <code>ExtensionUtils.loadStyleSheet()</code> for styles</li>
                            <li>Create <code>unittests.js</code> for unit tests</li>
                        </ul>
                    </section>
                    
                    <section data-state="how-extensions-bg">
                        <h2>Example: HelloWorld</h2>
                        <pre><code contenteditable>define(function (require, exports, module) {
    "use strict";

    var CommandManager = brackets.getModule("command/CommandManager"),
        Menus          = brackets.getModule("command/Menus");

    // Function to run when the menu item is clicked
    function doHelloWorld() {
        window.alert("Hello, world!");
    }
    
    // Register command--can be called from menus, kbd shortcuts, etc.
    var MY_COMMAND_ID = "helloworld.sayhello";
    CommandManager.register("Hello World", MY_COMMAND_ID, doHelloWorld);

    // Create a menu item and key binding bound to the command
    var menu = Menus.getMenu(Menus.AppMenuBar.FILE_MENU);
    menu.addMenuItem(MY_COMMAND_ID, "Ctrl-Alt-H");
});
                        </code></pre>
                    </section>
<!--
                    <section data-state="how-extensions-bg">
                        <h2>Commands</h2>
                        <ul>
                            <li>Centralized operations dispatched by CommandManager</li>
                            <li>Commands can be bound to menu items and keyboard shortcuts</li>
                            <li>Can also be called directly from other code (loose coupling)</li>
                            <li>Can take params when called directly from code</li>
                            <li>Each command maintains its own checked/disabled state</li>
                        </ul>
                    </section>
                    
                    <section data-state="how-extensions-bg">
                        <h2>Menus</h2>
                        <ul>
                            <li>Can add menu items to existing menus/menu sections</li>
                            <li>Can create new top level or context menus</li>
                            <li>On context menu, call <code>open()</code> to pop it up</li>
                            <li>Can handle <code>beforeContextMenuOpen</code> to update menu</li>
                        </ul>
                    </section>
                    
                    <section data-state="how-extensions-bg">
                        <h2>Keyboard shortcuts</h2>
                        <ul>
                            <li>Can specify when creating menu item or use <code>KeyBindingManager</code></li>
                            <li>By default, <code>Ctrl</code> auto-maps to <code>Cmd</code> on Mac</li>
                            <li>Can specify different shortcuts per platform</li>
                        </ul>
                    </section>
-->
                    
                    <section data-state="how-extensions-bg">
                        <h2>Code Hinting Extensions</h2>
                        <p>Register with <code>CodeHintManager.registerHintProvider()</code></p>
                        <pre><code>{    
    shouldShowHintsOnKey: function (string) {
        // quick shortcut check
        // return true if you want to pop up hints on this key
    },

    getQueryInfo: function (editor, cursor) {
        // return the query object to be used for hinting
        // must have queryStr property--set to null if no hints
        // query object can have other properties
    },
    
    search: function (query) {
        // takes the query object and performs the actual search
        // returns an array of matching strings
    },
    
    handleSelect: function (string, editor, cursor) {
        // performs the edit based on the selected string
    }
}</code></pre>
                    </section>
                    
                    <section data-state="how-extensions-bg">
                        <h2>Quick Open Extensions</h2>  
                        <p>Register with <code>QuickOpen.addQuickOpenPlugin()</code></p>
                        <pre><code>{
    name: /* plugin name */,
    fileTypes: /* array of applicable types, or [] for all */,
    match: function (queryStr) {
        // returns true if this provider wants to handle the query
    },
    search: function (queryStr) {
        // returns list of applicable items
        // items can be strings or objects with a "label" property
    },
    itemFocus: function (item) {
        // called when user highlights an item
    },
    itemSelect: function (item) { 
        // called when user chooses an item
    },
    resultFormatter: function (queryStr, item) {
        // returns an &lt;li&gt; to display the given query and item object
    },
    done: function () { 
        // called when quick open is closed
    }
}</code></pre>
                    </section>
    
                    <section data-state="how-extensions-bg">
                        <h2>Quick Edit Extensions</h2>
                        <p>Register with <code>EditorManager.registerInlineEditProvider()</code></p>
                        <pre><code>function myProvider(editor, pos) {
    // returns either a Promise that will be resolved with an inline widget
    // or null if we don't want to handle it
}

// Standard prototype chain hookup--do it however you like
function MyInlineWidget() {
    InlineWidget.call(this);
    // construct your widget's contents inside the $htmlContent node
}
MyInlineWidget.prototype = new InlineWidget();
MyInlineWidget.prototype.constructor = MyInlineWidget;
MyInlineWidget.prototype.parentClass = InlineWidget.prototype;

// can also implement onAdded, onClosed
</code></pre>
                    </section>

                    <section data-state="how-extensions-bg">
                        <h2>Code Complete! What Now?</h2>
                        <ul>
                            <li>Add it to the <a href="https://github.com/adobe/brackets/wiki/Brackets-Extensions">Brackets Extensions</a> page</li>
                            <li>Post about it to the <a href="https://groups.google.com/group/brackets-dev">Google Group</a></li>
                            <li>Give us feedback on the API</li>
                        </ul>
                    </section>
                </section>

                <section>
                    <h2>More Resources</h2>
                    <ul>
                        <li><a href="https://github.com/adobe/brackets/wiki/How-to-Hack-on-Brackets">How to Hack on Brackets</a></li>
                        <li><a href="https://github.com/adobe/brackets/wiki/How-to-write-extensions">How to Write Extensions</a></li>
                        <li><a href="https://github.com/adobe/brackets/wiki/Brackets-Development-How-Tos">Brackets Development How-Tos</a></li>
                    </ul>
                    <p class="fragment punchline">If something's missing, please help us improve the docs!</p>
                </section>
                
                <section>
                    <!-- Why does 25% work? -->
                    <div class="finale">GO</div>
                </section>
            </div>
            
            <!-- The navigational controls UI -->
            <aside class="controls">
                <a class="left" href="#">&#x25C4;</a>
                <a class="right" href="#">&#x25BA;</a>
                <a class="up" href="#">&#x25B2;</a>
                <a class="down" href="#">&#x25BC;</a>
            </aside>
            
            <!-- Displays presentation progress, max value changes via JS to reflect # of slides -->
            <div class="progress"><span></span></div>

            <!-- Bug in lower left showing link to preso -->
            <div class="bug">Permalink: <a href="http://is.gd/hackbrackets">is.gd/hackbrackets</a></div>
        </div>        

        <script src="../jquery-1.7.min.js"></script>
        <script src="../reveal.js/lib/js/head.min.js"></script>
        <script src="../reveal.js/js/reveal.js"></script>
        
        <script>
            Reveal.initialize({
                // Display controls in the bottom right corner
                controls: true,
                
                // Display a presentation progress bar
                progress: true,
                
                // If true; each slide will be pushed to the browser history
                history: true,
                
                // Loops the presentation, defaults to false
                loop: false,
                
                // Flags if mouse wheel navigation should be enabled
                mouseWheel: true,
                
                // Apply a 3D roll to links on hover
                rollingLinks: false,
                
                // UI style
                theme: 'sky',
                
                // Transition style
                transition: 'linear',
                
                dependencies: [
					{ src: '../reveal.js/lib/js/highlight.js', async: true, callback: function() { window.hljs.initHighlightingOnLoad(); } },
					{ src: '../reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } }
                ]
            });
            
            $(".dimmer").click(function() {
                $(this).closest("section").toggleClass("dimmed");
            });
        </script>
    </body>
</html>
